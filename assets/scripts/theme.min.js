(function(){'use strict';function getInitialTheme(){const storedTheme=localStorage.getItem('theme');if(storedTheme){return storedTheme;}if(window.matchMedia&&window.matchMedia('(prefers-color-scheme:dark)').matches){return 'dark';}return 'light';}function applyTheme(theme){document.documentElement.setAttribute('data-theme',theme);localStorage.setItem('theme',theme);const themeToggle=document.getElementById('theme-toggle');if(themeToggle){const label=theme==='light' ? 'Switch to dark theme':'Switch to light theme';themeToggle.setAttribute('aria-label',label);}}function toggleTheme(){const currentTheme=document.documentElement.getAttribute('data-theme');const newTheme=currentTheme==='light' ? 'dark':'light';const themeToggle=document.getElementById('theme-toggle');if(themeToggle){themeToggle.classList.add('changing');setTimeout(()=>{themeToggle.classList.remove('changing');},300);}applyTheme(newTheme);}function initTheme(){const initialTheme=getInitialTheme();applyTheme(initialTheme);const themeToggle=document.getElementById('theme-toggle');if(themeToggle){themeToggle.addEventListener('click',toggleTheme);themeToggle.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();toggleTheme();}});}if(window.matchMedia){window.matchMedia('(prefers-color-scheme:dark)').addEventListener('change',(e)=>{if(!localStorage.getItem('theme')){applyTheme(e.matches ? 'dark':'light');}});}}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',initTheme);}else{initTheme();}})();